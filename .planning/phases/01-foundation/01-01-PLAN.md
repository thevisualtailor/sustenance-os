---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - vite.config.js
  - index.html
  - .gitignore
  - vercel.json
  - src/main.js
  - src/view/app-shell.js
  - src/styles/main.css
  - public/fonts/geist/Geist-Regular.woff2
  - public/fonts/geist/Geist-Medium.woff2
  - public/fonts/geist/Geist-SemiBold.woff2
  - public/fonts/geist/Geist-Bold.woff2
autonomous: true

must_haves:
  truths:
    - "App loads on Vercel production URL and is reachable from any device"
    - "Layout is mobile-first with no horizontal scrolling on iPhone"
    - "Visual style matches Compound OS (dark theme, Geist + Roboto Mono, CSS variables)"
    - "App shell renders header and main content area"
  artifacts:
    - path: "package.json"
      provides: "Project config with Vite 7.3.1 and scripts"
      contains: "vite"
    - path: "vite.config.js"
      provides: "Vite build configuration"
      contains: "defineConfig"
    - path: "index.html"
      provides: "HTML entry point with viewport meta and font links"
      contains: "viewport"
    - path: "src/main.js"
      provides: "App entry point that bootstraps the shell"
      contains: "createAppShell"
    - path: "src/view/app-shell.js"
      provides: "Header and main content area shell"
      exports: ["createAppShell"]
    - path: "src/styles/main.css"
      provides: "CSS variables, reset, layout, mobile-first styles"
      contains: "--bg: #0a0a0a"
    - path: "vercel.json"
      provides: "SPA rewrite rules for Vercel"
      contains: "rewrites"
  key_links:
    - from: "index.html"
      to: "src/main.js"
      via: "script type=module"
      pattern: 'src="/src/main.js"'
    - from: "src/main.js"
      to: "src/view/app-shell.js"
      via: "import createAppShell"
      pattern: "import.*createAppShell.*app-shell"
    - from: "src/main.js"
      to: "src/styles/main.css"
      via: "CSS import"
      pattern: "import.*styles/main.css"
    - from: "src/styles/main.css"
      to: "public/fonts/geist/"
      via: "@font-face src url"
      pattern: "url.*fonts/geist"
---

<objective>
Scaffold the Sustenance OS Vite project from the Compound OS reference, push to GitHub, and deploy to Vercel with a production URL.

Purpose: Establishes the living codebase -- a deployable, visually styled scaffold that all future phases build on. Without this, nothing else can happen.
Output: A working Vite app deployed to Vercel that renders a Compound OS-styled app shell (header + main area) with the dark theme, correct fonts, and mobile-first layout.
</objective>

<execution_context>
@/Users/jaycarter/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jaycarter/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md

Reference source (read these for patterns, do NOT copy Compound OS-specific business logic):
@compound.os-main/package.json
@compound.os-main/vite.config.js
@compound.os-main/index.html
@compound.os-main/src/main.js
@compound.os-main/src/styles/main.css
@compound.os-main/src/view/app-shell.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Vite project with Compound OS structure and styles</name>
  <files>
    package.json
    vite.config.js
    index.html
    .gitignore
    vercel.json
    src/main.js
    src/view/app-shell.js
    src/styles/main.css
    public/fonts/geist/Geist-Regular.woff2
    public/fonts/geist/Geist-Medium.woff2
    public/fonts/geist/Geist-SemiBold.woff2
    public/fonts/geist/Geist-Bold.woff2
  </files>
  <action>
    Create the Sustenance OS project by adapting the Compound OS scaffold. This is NOT a copy -- strip all Compound OS business logic (charts, dropzone, import, dashboard, dexie, etc.) and keep only the structural shell and design system.

    **package.json:**
    - name: "sustenance-os", private: true, version: "0.1.0", type: "module"
    - scripts: dev, build, preview (same as Compound OS)
    - devDependencies: vite "^7.3.1"
    - dependencies: geist "^1.7.0" (for font files only, self-hosted in production)
    - No other Compound OS dependencies (no dexie, chart.js, xlsx, etc. -- those are Compound OS-specific)

    **vite.config.js:**
    - Match Compound OS: defineConfig with server port 5173, open: false, build outDir: 'dist'

    **index.html:**
    - Copy Compound OS structure exactly but change title to "Sustenance OS"
    - Keep: charset, viewport meta, Google Fonts links (Instrument Serif + Roboto Mono), stylesheet link, #app div, module script
    - Add: `<meta name="theme-color" content="#0a0a0a" />` in head (for mobile browser chrome tinting, prep for PWA)
    - Do NOT add apple-mobile-web-app meta tags yet -- that is Plan 02

    **vercel.json:**
    - SPA catch-all rewrite: `{ "rewrites": [{ "source": "/(.*)", "destination": "/index.html" }] }`

    **.gitignore:**
    - Copy from Compound OS, add: `.env`, `.env.local`, `.vercel`

    **Geist font self-hosting (CRITICAL -- research pitfall #1):**
    - After `npm install`, copy the 4 Geist .woff2 files from `node_modules/geist/dist/fonts/geist-sans/` to `public/fonts/geist/`
    - Files: Geist-Regular.woff2, Geist-Medium.woff2, Geist-SemiBold.woff2, Geist-Bold.woff2
    - This prevents the `/node_modules/` path breaking in production builds

    **src/styles/main.css:**
    - Copy the Compound OS CSS variable system (`:root` block) exactly -- same colors, fonts, spacing
    - Copy the reset (`*, *::before, *::after`), html, body, and `#app` styles
    - Copy the `.app-header` styles (flex layout, h1 with Instrument Serif)
    - Copy the `.app-main` styles (max-width 600px, centered)
    - Copy the mobile `@media (max-width: 480px)` adjustments for `#app` and `.app-header`
    - Update `@font-face` declarations to use `/fonts/geist/` paths instead of `/node_modules/geist/...`
    - Do NOT copy Compound OS-specific styles (dropzone, dashboard, chart, settings, toast, modals, celebration, milestone, goal, momentum, pace-meter, etc.)
    - Add a simple `.app-placeholder` style for the scaffold welcome content:
      ```css
      .app-placeholder {
        text-align: center;
        padding: 3rem 1.5rem;
      }
      .app-placeholder__title {
        font-family: var(--font-heading);
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
      }
      .app-placeholder__subtitle {
        font-size: 0.85rem;
        color: var(--text-muted);
      }
      ```

    **src/view/app-shell.js:**
    - Simplified version of Compound OS app-shell.js
    - Export `createAppShell(root)` that creates: header (with h1 "Sustenance OS") and main area
    - NO settings dropdown, NO gear button, NO import/export/restore logic -- just the structural shell
    - Header: `<header class="app-header"><h1>Sustenance OS</h1></header>`
    - Main: `<main class="app-main"></main>`
    - Returns `{ header, main }`

    **src/main.js:**
    - Import `./styles/main.css`
    - Import `createAppShell` from `./view/app-shell.js`
    - Simple init function: get `#app`, call `createAppShell(app)`, render placeholder content in main
    - Placeholder content: div with class `app-placeholder` containing a title "Sustenance OS" and subtitle "Your BED-safe nutrition coach" -- proves the shell renders correctly
    - Call init()

    Run `npm install` after creating package.json.
  </action>
  <verify>
    Run `npm run build` -- must exit 0 with no errors and produce a `dist/` directory.
    Run `npm run dev` in background, then `curl http://localhost:5173` -- must return HTML containing "Sustenance OS".
    Verify `public/fonts/geist/` contains 4 .woff2 files.
    Verify `dist/` contains the built assets after build.
  </verify>
  <done>
    Vite dev server starts and serves the app shell with dark theme and correct fonts. Production build succeeds. The app renders "Sustenance OS" header and placeholder content.
  </done>
</task>

<task type="auto">
  <name>Task 2: Push to GitHub and deploy to Vercel</name>
  <files>
    (no new files -- uses existing scaffold)
  </files>
  <action>
    **GitHub:**
    - Initialize git repo if not already (project root already has git from planning commits)
    - Create a GitHub repo named "sustenance-os" using `gh repo create sustenance-os --public --source=. --push`
    - If repo already exists, just push: `git push -u origin main`
    - Commit all scaffold files first: `git add package.json vite.config.js index.html .gitignore vercel.json src/ public/` then commit

    **Vercel:**
    - Deploy using the Vercel CLI: `npx vercel --yes` for initial link, then `npx vercel --prod` for production deploy
    - If vercel CLI is not installed, install it: `npm i -g vercel`
    - Vercel auto-detects Vite -- no special config needed beyond vercel.json
    - Record the production URL from the deploy output

    **Important:** If the CLI asks for auth or encounters an auth error, this becomes an authentication gate -- create a note that the user needs to run `vercel login` and re-run the deploy. Do NOT block the plan on this.

    After deploy, verify the production URL returns the app.
  </action>
  <verify>
    `gh repo view sustenance-os` succeeds (repo exists on GitHub).
    Production URL loads in browser (curl the Vercel URL -- must return HTML containing "Sustenance OS").
  </verify>
  <done>
    Code is on GitHub, Vercel production URL is live and serving the Sustenance OS scaffold. App is reachable from any device via the production URL.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` exits 0
2. `npm run dev` serves the app locally at http://localhost:5173
3. The app renders: dark background (#0a0a0a), "Sustenance OS" header in Instrument Serif, placeholder text in Roboto Mono
4. Geist font loads from self-hosted /fonts/geist/ path (not node_modules)
5. GitHub repo exists and contains the scaffold
6. Vercel production URL returns the app
7. No horizontal scrolling on mobile viewport (check with device toolbar in DevTools)
</verification>

<success_criteria>
- Production Vercel URL loads the Sustenance OS app shell
- Dark theme with Compound OS color palette is visible
- Mobile-first layout with no horizontal scroll at 375px width
- GitHub repo contains the complete scaffold
- `npm run build` produces clean dist/ output
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
